{"ast":null,"code":"// 从actionType里面引入addToCart, clearCart, increaseQuantity,decreaseQuantity,removeItem\nimport { addToCart, clearCart, increaseQuantity, decreaseQuantity, removeItem } from \"../Action/ActionType\";\n// 引入 data\nimport shareShop from \"../../data/data\";\nlet data = shareShop();\nlet product = {\n  products: data,\n  cartItems: []\n};\n// 定义reducer函数，reducer函数里面有两个参数 1. state  2. action\nlet rootReducer = (state = product, action) => {\n  switch (action.type) {\n    case \"addToCart\":\n      // 解构商品的属性,,  find 是查找并返回数据的\n      let {\n        id,\n        name,\n        brand,\n        desc,\n        price,\n        img,\n        size,\n        color,\n        parameter\n      } = state.products.find(product => product.parameter == action.payload);\n      // 用 boolean 来判断购物车里是否有该数据， 用来当作判断的 true or false\n      // 判断购物车里是否有该数据或该商品，如果有，则让其数量+1，如果没有 则添加进购物车里面\n      let existingItem = state.cartItems.find(item => item.parameter == parameter);\n      if (existingItem) {\n        return {\n          // 如果存在该商品，则让该商品的数量 +1\n          //  ...state指的是包含两个属性 products和cartItems 一起\n          //   结合运用扩展运算符 ...state, cartItems   来进行state和购物车数据的 数据合并更新\n          ...state,\n          cartItems: state.cartItems.map(item => item.parameter == parameter ? {\n            ...item,\n            quantity: item.quantity + 1\n          } : item)\n        };\n      } else {\n        //   如果购物车为空时 没有该商品时，去添加 属性quantity：1\n        return {\n          ...state,\n          cartItems: [...state.cartItems, {\n            id,\n            name,\n            brand,\n            desc,\n            price,\n            img,\n            size,\n            color,\n            parameter,\n            quantity: 1\n          }]\n        };\n      }\n    case clearCart:\n      // 清空购物车里面的数据时，购物车产品数量为0时\n      return {\n        ...state,\n        cartItems: []\n      };\n    default:\n      return state;\n  }\n};\n// 暴露出rootReducer\nexport default rootReducer;","map":{"version":3,"names":["addToCart","clearCart","increaseQuantity","decreaseQuantity","removeItem","shareShop","data","product","products","cartItems","rootReducer","state","action","type","id","name","brand","desc","price","img","size","color","parameter","find","payload","existingItem","item","map","quantity"],"sources":["/Users/fs/Documents/Eyewear website/my-project/src/Components/Reducer/ReducerOne.js"],"sourcesContent":["// 从actionType里面引入addToCart, clearCart, increaseQuantity,decreaseQuantity,removeItem\nimport {\n  addToCart,\n  clearCart,\n  increaseQuantity,\n  decreaseQuantity,\n  removeItem,\n} from \"../Action/ActionType\";\n// 引入 data\nimport shareShop from \"../../data/data\";\nlet data = shareShop();\nlet product = {\n  products: data,\n  cartItems: [],\n};\n// 定义reducer函数，reducer函数里面有两个参数 1. state  2. action\nlet rootReducer = (state = product, action) => {\n  switch (action.type) {\n    case \"addToCart\":\n      // 解构商品的属性,,  find 是查找并返回数据的\n      let { id, name, brand, desc, price, img, size, color, parameter } =\n        state.products.find((product) => product.parameter == action.payload);\n      // 用 boolean 来判断购物车里是否有该数据， 用来当作判断的 true or false\n      // 判断购物车里是否有该数据或该商品，如果有，则让其数量+1，如果没有 则添加进购物车里面\n      let existingItem = state.cartItems.find(\n        (item) => item.parameter == parameter\n      );\n      if (existingItem) {\n        return {\n          // 如果存在该商品，则让该商品的数量 +1\n          //  ...state指的是包含两个属性 products和cartItems 一起\n          //   结合运用扩展运算符 ...state, cartItems   来进行state和购物车数据的 数据合并更新\n          ...state,\n          cartItems: state.cartItems.map((item) =>\n            item.parameter == parameter\n              ? { ...item, quantity: item.quantity + 1 }\n              : item\n          ),\n        };\n      } else {\n        //   如果购物车为空时 没有该商品时，去添加 属性quantity：1\n        return {\n          ...state,\n          cartItems: [\n            ...state.cartItems,\n            {\n              id,\n              name,\n              brand,\n              desc,\n              price,\n              img,\n              size,\n              color,\n              parameter,\n              quantity: 1,\n            },\n          ],\n        };\n      }\n    case clearCart:\n      // 清空购物车里面的数据时，购物车产品数量为0时\n      return { ...state, cartItems: [] };\n\n    default:\n      return state;\n  }\n};\n// 暴露出rootReducer\nexport default rootReducer;\n"],"mappings":"AAAA;AACA,SACEA,SAAS,EACTC,SAAS,EACTC,gBAAgB,EAChBC,gBAAgB,EAChBC,UAAU,QACL,sBAAsB;AAC7B;AACA,OAAOC,SAAS,MAAM,iBAAiB;AACvC,IAAIC,IAAI,GAAGD,SAAS,CAAC,CAAC;AACtB,IAAIE,OAAO,GAAG;EACZC,QAAQ,EAAEF,IAAI;EACdG,SAAS,EAAE;AACb,CAAC;AACD;AACA,IAAIC,WAAW,GAAGA,CAACC,KAAK,GAAGJ,OAAO,EAAEK,MAAM,KAAK;EAC7C,QAAQA,MAAM,CAACC,IAAI;IACjB,KAAK,WAAW;MACd;MACA,IAAI;QAAEC,EAAE;QAAEC,IAAI;QAAEC,KAAK;QAAEC,IAAI;QAAEC,KAAK;QAAEC,GAAG;QAAEC,IAAI;QAAEC,KAAK;QAAEC;MAAU,CAAC,GAC/DX,KAAK,CAACH,QAAQ,CAACe,IAAI,CAAEhB,OAAO,IAAKA,OAAO,CAACe,SAAS,IAAIV,MAAM,CAACY,OAAO,CAAC;MACvE;MACA;MACA,IAAIC,YAAY,GAAGd,KAAK,CAACF,SAAS,CAACc,IAAI,CACpCG,IAAI,IAAKA,IAAI,CAACJ,SAAS,IAAIA,SAC9B,CAAC;MACD,IAAIG,YAAY,EAAE;QAChB,OAAO;UACL;UACA;UACA;UACA,GAAGd,KAAK;UACRF,SAAS,EAAEE,KAAK,CAACF,SAAS,CAACkB,GAAG,CAAED,IAAI,IAClCA,IAAI,CAACJ,SAAS,IAAIA,SAAS,GACvB;YAAE,GAAGI,IAAI;YAAEE,QAAQ,EAAEF,IAAI,CAACE,QAAQ,GAAG;UAAE,CAAC,GACxCF,IACN;QACF,CAAC;MACH,CAAC,MAAM;QACL;QACA,OAAO;UACL,GAAGf,KAAK;UACRF,SAAS,EAAE,CACT,GAAGE,KAAK,CAACF,SAAS,EAClB;YACEK,EAAE;YACFC,IAAI;YACJC,KAAK;YACLC,IAAI;YACJC,KAAK;YACLC,GAAG;YACHC,IAAI;YACJC,KAAK;YACLC,SAAS;YACTM,QAAQ,EAAE;UACZ,CAAC;QAEL,CAAC;MACH;IACF,KAAK3B,SAAS;MACZ;MACA,OAAO;QAAE,GAAGU,KAAK;QAAEF,SAAS,EAAE;MAAG,CAAC;IAEpC;MACE,OAAOE,KAAK;EAChB;AACF,CAAC;AACD;AACA,eAAeD,WAAW"},"metadata":{},"sourceType":"module","externalDependencies":[]}